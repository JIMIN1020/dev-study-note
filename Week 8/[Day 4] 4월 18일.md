## 📍 자바스크립트의 동기와 비동기

단일 스레드(Single Thread)로 동작하는 자바스크립트는 한번에 하나의 작업만 수행할 수 있다.

따라서 앞선 작업이 종료되어야 다음 작업을 수행하게 되는데 이렇게 순차적으로 작업을 수행하는 것을 동기(Synchronous)라고 하며, 반대로 동시에 여러 작업을 병행 수행하는 것을 비동기(Asynchronous)라 한다.

![1*V5syja2casc0gCuu9zKV5g](https://github.com/JIMIN1020/dev-study-note/assets/121474189/449b6222-060e-4e08-98f9-30648974dc8e)

<br/>

## 📍 동기 (Synchronous)

한 번에 하나의 작업을 순차적으로 수행하는 방식을 말한다.

자바스크립트는 기본적으로 동기 방식으로 동작한다.

이러한 동기 방식은 하나의 작업이 끝나야만 다른 작업을 수행할 수 있기 때문에 하나의 작업이 오래 걸리는 경우에도 그 작업이 끝날 때까지 다른 작업을 할 수 없는 상태로 기다려야 하는 단점이 존재한다.

예를 들어 서버에 응답을 요청하는 코드가 있다면, 그 코드가 실행되는 순간부터 서버로부터 응답을 받을 때까지 프로그램은 대기해야 한다.

이렇게 되면 프로그램의 흐름이 중간중간 멈추게 되기 때문에 처리의 효율성이나 사용자 경험에 영향을 미칠 수 있다.

### ✔️ 예시

함수가 시작된 시간을 구하고 그 시간으로부터 2초가 지나도록 while loop를 도는 함수 `syncFunc` 가 있다.

이 함수 앞 뒤로 “start”, “end”라는 로그를 찍을 것이고 함수 내부에서는 작업이 종료될 때 “func”라는 로그를 찍는다.

```jsx
function syncFunc() {
  let startTime = new Date().getTime(); // 함수가 시작된 시간
  let currentTime = startTime;

  // 시작 시간으로부터 3초가 지날 때 까지
  while (currentTime - startTime < 3000) {
    currentTime = new Date().getTime(); // 현재 시간 업데이트
  }
  console.log("func");
}

console.log("start");
syncFunc();
console.log("end");
```

이 코드의 결과는 “start”가 출력된 후, `syncFunc` 가 실행되어 2초간 while loop를 돌고 이 함수가 종료될 때까지 대기한다.

그 후 `syncFunc` 가 “func”를 찍고 종료되면 그 다음 코드에 의해 “end”가 찍히게 된다.

이렇게 동기 방식으로 동작하면 순차적으로 작업이 수행되고, 하나의 작업이 수행되는 동안 프로그램의 흐름이 멈추거나 지연될 수 있다.

<br/>

## 📍 비동기 (Asynchronous)

순차적으로 앞선 작업이 끝날 때까지 기다리지 않고 다른 작업을 동시에 수행할 수 있는 방식을 말한다.

다시 말해 작업을 병렬적으로 처리할 수 있다는 것이다.

자바스크립트는 동기 방식으로 동작하는 것에 대한 단점을 보완하기 위해 여러 작업을 동시에 수행할 수 있는 비동기 방식을 도입하였다.

만약 서버에 응답을 요청하는 코드가 있는데 그것이 비동기 방식으로 동작한다면, 서버로부터 응답을 받기 위해 대기하는 동안에도 다른 작업을 동시에 처리할 수 있다.

이렇게 처리하면 프로그램의 흐름이 멈추거나 지연되지 않고 여러 작업을 동시에 수행하여 자원을 효율적으로 사용할 수 있다.

### ✔️ 예시

자바스크립트에는 대표적인 비동기 함수인 `setTimeout` 이 있다.

`setTimeout` 은 일정 시간이 지난 후 콜백 함수를 호출한다.

이 코드에서는 `setTimeout` 을 이용하여 3초 뒤 “func”를 찍는 함수 `asyncFunc` 를 만들었고, 이 함수 앞 뒤로 “start”, “end”를 찍는다.

```jsx
function asyncFunc() {
  setTimeout(() => {
    console.log("func"); // 3초 뒤 실행
  }, 3000);
}

console.log("start");
asyncFunc();
console.log("end");
```

이 코드의 결과는 “start”가 찍힌 후 곧바로 “end”가 찍히고, `asyncFunc` 의 실행이 끝나기 직전에 “func”가 찍히게 된다.

앞선 작업이 끝날 때까지 대기하지 않기 때문에 `asyncFunc` 이 실행되는 동안 다음 작업인 `console.log("end")` 가 동시에 실행된 것이다.

그렇다면 단일 스레드 언어인 자바스크립트가 어떻게 비동기로 동작할 수 있는 것일까?

이는 브라우저의 이벤트 루프 개념과 연관이 있다.
