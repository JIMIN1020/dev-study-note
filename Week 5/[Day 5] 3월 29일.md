## ğŸ“Â Workbench

### âœ”ï¸Â DB ì—°ê²°í•˜ê¸°

Dockerë¥¼ ì‹¤í–‰ì‹œí‚¨ ìƒíƒœì—ì„œ Workbenchì—ì„œ DBì™€ ì—°ê²°í•´ì¤€ë‹¤.

<img width="912" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-29 á„‹á…©á„Œá…¥á†« 10 36 55" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/cad1221f-0d32-4f1d-a0f6-ee6d70b0ce73">

ì´ë ‡ê²Œ ì—°ê²°í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ SQL editorë¥¼ ì—´ ìˆ˜ ìˆë‹¤.

<img width="1390" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-29 á„‹á…©á„Œá…¥á†« 10 42 29" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/b9244fa3-fe76-4d37-aebb-de5137f1ef10">

<br/>

## ğŸ“Â ë¯¸ë‹ˆ í”„ë¡œì íŠ¸: í…Œì´ë¸” ìƒì„±

### âœ”ï¸Â Schema ìƒì„±

<img width="834" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-29 á„‹á…©á„Œá…¥á†« 10 49 34" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/87332d65-2b8d-4007-8213-e33d7a852e31">

### âœ”ï¸Â users í…Œì´ë¸” ìƒì„±

```sql
CREATE TABLE `Youtube`.`users` (
  `user_id` INT NOT NULL AUTO_INCREMENT,
  `pw` VARCHAR(30) NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `email` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`user_id`),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC) VISIBLE,
  UNIQUE INDEX `user_id_UNIQUE` (`user_id` ASC) VISIBLE
);
```

### âœ”ï¸Â channels í…Œì´ë¸” ìƒì„±

Foreign Keyë¥¼ ì„¤ì •í•´ì£¼ê³ , í…Œì´ë¸”ì„ ìƒì„±í•˜ë©´ ë!

<img width="1266" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-29 á„‹á…©á„Œá…¥á†« 11 10 23" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/f97bc66b-9a30-48a8-8db8-e55bf3b1350a">

```sql
CREATE TABLE `Youtube`.`channels` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `channel_name` VARCHAR(100) NOT NULL,
  `subsribers` INT NOT NULL DEFAULT 0,
  `videos` INT NOT NULL DEFAULT 0,
  `user_id` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `user_id_idx` (`user_id` ASC) VISIBLE,
  CONSTRAINT `user_id`
    FOREIGN KEY (`user_id`)
    REFERENCES `Youtube`.`users` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);
```

### âœ”ï¸Â Timezone ë§ì¶”ê¸°

DB ì„œë²„ì™€ Node.js ì„œë²„ê°„ timezoneì´ ë§ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆë‹¤. â†’ time_zone ë°”ê¾¸ê¸°!

```sql
SET time_zone = "Asia/Seoul";
```

ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ time_zone ì„¸íŒ…ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```sql
SELECT @@global.time_zone, @@session.time_zone;
```

<br/>

## ğŸ“Â ë¯¸ë‹ˆ í”„ë¡œì íŠ¸: DB ì—°ë™

express ì„œë²„ì™€ mariaDBë¥¼ ì—°ë™í•  ê²ƒì´ë‹¤.

### âœ”ï¸Â mysql2 íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
npm i mysql2 --save
```

### âœ”ï¸Â ê¸°ë³¸ ì„¸íŒ…

```jsx
const mysql = require("mysql2");

// db ì—°ê²°í•˜ê¸°
const connection = mysql.createConnection({
  host: "localhost",
  user: "root",
  password: "root",
  database: "Youtube",
  dateStrings: true, // dateë¥¼ stringìœ¼ë¡œ ë°›ì•„ì˜¤ê¸°
});

// query ì‘ì„±
connection.query("SELECT * FROM channels;", (err, result, fields) => {
  console.log(result);
});
```

resultì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì¿¼ë¦¬ ê²°ê³¼ê°’ì´ ë‹´ê²¨ì ¸ ìˆê³ ,

```jsx
[
  {
    id: 1,
    channel_name: "channel1",
    subsribers: 10,
    videos: 100,
    user_id: 1,
  },
  {
    id: 2,
    channel_name: "channel2",
    subsribers: 20,
    videos: 200,
    user_id: 2,
  },
  {
    id: 3,
    channel_name: "channel3",
    subsribers: 100,
    videos: 320,
    user_id: 3,
  },
];
```

fieldsì—ëŠ” resultê°€ ì–´ë–¤ ë°ì´í„°ì¸ì§€ ì •ë³´ë¥¼ ë‹´ê³  ìˆë‹¤.

```sql
[
  `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `channel_name` VARCHAR(100) NOT NULL,
  `subsribers` INT NOT NULL,
  `videos` INT NOT NULL,
  `user_id` INT
]
```
