## ğŸ“Â ë¯¸ë‹ˆ í”„ë¡œì íŠ¸: ë¡œê·¸ì¸ API

parameterë‚˜ ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ìœ¼ë¡œ ë¡œê·¸ì¸ ì •ë³´ë¥¼ ë³´ë‚´ë©´ id, pw ê°’ì´ ë…¸ì¶œë˜ë¯€ë¡œ body ê°’ì— ë°ì´í„°ë¥¼ ë‹´ì•„ ë³´ë‚´ê¸° ìœ„í•´ **POST**ë¥¼ ì„ íƒí•˜ì˜€ë‹¤.

ë¨¼ì € idê°€ ì¡´ì¬í•˜ëŠ”ì§€ `isExsistId` í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ê²€ì¦í•˜ê³ , ìˆë‹¤ë©´ í•´ë‹¹ ìœ ì €ì˜ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¨ë‹¤.

ê·¸ í›„ ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜ ì—¬ë¶€ì— ë”°ë¼ ì‘ë‹µê°’ì„ ì „ë‹¬í•˜ê³ , ë§Œì•½ id ìì²´ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—” 404ë¥¼ ì‘ë‹µí•œë‹¤!

```tsx
/* ----- dbì— idê°€ ìˆëŠ”ì§€ ê²€ì¦í•˜ëŠ” í•¨ìˆ˜ ----- */
const isExsistId = (id) => {
  for (const userData of db.values()) {
    if (userData.id === id) {
      return userData;
    }
  }
  return false;
};

/* ----- ë¡œê·¸ì¸ API ----- */
app.post("/login", (req, res) => {
  const { id, pw } = req.body;
  const userData = isExsistId(id);

  if (userData) {
    if (userData.pw == pw) {
      return res.status(200).json({
        isSuccess: true,
        message: `${userData.name}ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤.`,
      });
    } else {
      return res.status(401).json({
        isSuccess: false,
        message: `ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`,
      });
    }
  } else {
    // ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´ë””ì¸ ê²½ìš°
    res.status(404).json({
      isSuccess: false,
      message: `ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.`,
    });
  }
});
```

**ë¨¼ì € íšŒì›ê°€ì… apië¡œ ìƒˆë¡œìš´ ìœ ì €ë¥¼ ê°€ì…ì‹œí‚¤ê³ ,**
<img width="685" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-25 á„‹á…©á„Œá…¥á†« 10 16 38" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/bfa330a1-1313-4a89-a7da-ec40386a1afe">

**ê°€ì…í•œ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ì„ ì‹œë„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìœ¼ë©°,**
<img width="688" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-25 á„‹á…©á„Œá…¥á†« 10 21 17" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/93aaef49-ccba-43e1-a4d0-26ab79f97338">

**ì•„ì´ë””ê°€ ì—†ê±°ë‚˜ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ì„ ê²½ìš° ì˜ˆì™¸ì²˜ë¦¬ê¹Œì§€ ë˜ì—ˆë‹¤!**
<img width="683" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-25 á„‹á…©á„Œá…¥á†« 10 22 30" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/dabd93f3-e99a-4944-a223-af03f68a73db">
<img width="687" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-25 á„‹á…©á„Œá…¥á†« 10 21 35" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/231f9433-f187-4d5f-a9a0-6ba7d2f60da5">

<br />

## ğŸ“Â ë¹ˆ ê°ì²´ë¥¼ í™•ì¸í•˜ëŠ” ë²• 3ê°€ì§€!

### âœ”ï¸Â Object.keys()

ì¸ìë¡œ ì „ë‹¬ë°›ì€ ê°ì²´ì˜ key ëª©ë¡ì„ ë°°ì—´ë¡œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜.

keyë¥¼ ë‹´ì€ ë°°ì—´ì˜ ê¸¸ì´ê°€ 0ì´ë©´ ê°ì²´ê°€ ë¹„ì–´ìˆëŠ” ê²ƒìœ¼ë¡œ íŒë‹¨í•  ìˆ˜ ìˆë‹¤!

```tsx
const obj = {};
console.log(Object.keys(obj)); // []

if (Object.keys(obj).length === 0) {
  // ...
}
```

### âœ”ï¸Â for..in + hasOwnProperty()

for..inë¬¸ê³¼ ê°ì²´ì— íŠ¹ì • ì†ì„±ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” `hasOwnProperty()` ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•.

ì†ì„±ì´ í•˜ë‚˜ë¼ë„ ìˆë‹¤ë©´ `false` ê°€ ë¦¬í„´ë˜ì–´ ë¹„ì–´ìˆì§€ ì•ŠìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```tsx
const isObjectEmpty = (obj) => {
  for (let prop in obj) {
    if (obj.hasOwnProperty(prop)) {
      return false;
    }
  }
  return true;
};
```

### âœ”ï¸Â lodash ë¼ì´ë¸ŒëŸ¬ë¦¬

object, collection, map, setì´ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆëŠ” lodash ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ `_.isEmpty()` í•¨ìˆ˜ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•.

```tsx
const obj = {};

_.isEmpty(obj); // true
```

<br />

## ğŸ“Â ë¯¸ë‹ˆ í”„ë¡œì íŠ¸: ì±„ë„ API ì„¤ê³„

### âœ”ï¸Â ì±„ë„ ìƒì„± í˜ì´ì§€

1. í™”ë©´ ë Œë”ë§ì„ ìœ„í•œ ë°ì´í„° í•„ìš” ì—†ìŒ
2. ì±„ë„ ìƒì„± API í•„ìš”

<img width="1039" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-25 á„‹á…©á„Œá…¥á†« 11 19 53" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/2666705b-cae6-4117-882c-960c462f2097">

### âœ”ï¸Â ì±„ë„ ê´€ë¦¬ í˜ì´ì§€

1. í˜ì´ì§€ ë Œë”ë§ì„ ìœ„í•´ íšŒì›ì´ ì†Œìœ í•œ ì „ì²´ ì±„ë„ ì¡°íšŒ API í•„ìš”!
2. ê°œë³„ ì±„ë„ ì‚­ì œ API í•„ìš”

<img width="1048" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-25 á„‹á…©á„Œá…¥á†« 11 28 35" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/8964d3c1-2fe4-4053-941c-78d19d7f606a">

### âœ”ï¸Â ì±„ë„ ìƒì„¸ í˜ì´ì§€

1. í˜ì´ì§€ ë Œë”ë§ì„ ìœ„í•´ í•´ë‹¹ ì±„ë„ì˜ ì •ë³´ ì¡°íšŒ API í•„ìš”
2. ì±„ë„ ì •ë³´ ìˆ˜ì • API í•„ìš”

<img width="1049" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-25 á„‹á…©á„Œá…¥á†« 11 24 38" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/413530e5-ecf0-4dd8-9005-919ae39dd5dc">

<br />

## ğŸ“Â ë¯¸ë‹ˆ í”„ë¡œì íŠ¸: ì±„ë„ API êµ¬í˜„

### âœ”ï¸Â ì±„ë„ ìƒì„± API

ë¨¼ì € ìš”ì²­ ê°’ì´ ìˆëŠ”ì§€ `hasOwnProperty` ë©”ì†Œë“œë¡œ í™•ì¸í•œ í›„, ì¡´ì¬í•  ê²½ìš° dbì— ì±„ë„ì„ ë“±ë¡í•œë‹¤.

ìš”ì²­ ê°’ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° 400 ì—ëŸ¬ë¥¼ ì‘ë‹µ!

```tsx
app.route("/channels").post((req, res) => {
  if (req.body.channelTitle) {
    const id = db.size + 1; // id êµ¬í•˜ê¸°
    db.set(id, req.body); // dbì— ë“±ë¡

    res.status(201).json({
      isSuccess: true,
      message: `${db.get(id).channelTitle}ì±„ë„ì„ ì‘ì›í•©ë‹ˆë‹¤!`,
    });
  } else {
    // ìš”ì²­ ê°’ì´ ì—†ëŠ” ê²½ìš°
    res.status(400).json({
      isSuccess: false,
      message: `ìš”ì²­ ê°’ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`,
    });
  }
});
```

### âœ”ï¸Â ì±„ë„ ê°œë³„ ì¡°íšŒ API

ì±„ë„ idë¥¼ ìš”ì²­ ê°’ìœ¼ë¡œ ë°›ì•„ì„œ í•´ë‹¹í•˜ëŠ” ì±„ë„ ì •ë³´ë¥¼ ì „ë‹¬í•œë‹¤.

ë§Œì•½ dbì— idê°€ ì—†ëŠ” ê²½ìš° 404 ì—ëŸ¬ ì‘ë‹µ!

```tsx
app.route("/channels/:id").get((req, res) => {
  const id = +req.params.id;

  if (db.get(id)) {
    res.status(200).json({
      isSuccess: true,
      channelData: db.get(id),
    });
  } else {
    res.status(404).json({
      isSuccess: false,
      message: `ì±„ë„ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`,
    });
  }
});
```

### âœ”ï¸Â ì±„ë„ ê°œë³„ ì‚­ì œ API

idë¥¼ ë°›ì•„ì™€ì„œ ì¡´ì¬ ìœ ë¬´ í™•ì¸ í›„ ì‚­ì œí•œë‹¤.

```tsx
app.route("/channels/:id").delete((req, res) => {
    const id = +req.params.id;
    const channel = db.get(id);

    if (channel) {
      db.delete(id); // dbì—ì„œ ì‚­ì œ

      res.status(200).json({
        isSuccess: true,
        message: `${channel.channelTitle} ì±„ë„ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`,
      });
    } else {
      res.status(404).json({
        isSuccess: false,
        message: `ì±„ë„ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`,
      });
    }
```

### âœ”ï¸Â ì±„ë„ ê°œë³„ ìˆ˜ì • API

id ê°’ì„ paramsë¡œ, ìˆ˜ì •í•  ì±„ë„ëª…ì„ body ê°’ìœ¼ë¡œ ë°›ì•„ì™€ì„œ ì±„ë„ì„ ìˆ˜ì •í•œë‹¤.

```tsx
app.route("/channels/:id").put((req, res) => {
  const id = +req.params.id;
  const { channelTitle } = req.body;
  const original = db.get(id); // ê¸°ì¡´ ë°ì´í„°

  if (original) {
    db.set(id, channelTitle); // db ìˆ˜ì •

    res.status(200).json({
      isSuccess: true,
      message: `ì±„ë„ëª…ì´ ${original.channelTitle}ì—ì„œ ${channelTitle}ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.`,
    });
  } else {
    res.status(404).json({
      isSuccess: false,
      message: `ì±„ë„ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`,
    });
  }
});
```

### âœ”ï¸Â ì±„ë„ ì „ì²´ ì¡°íšŒ API

ì±„ë„ ë°ì´í„°ê°€ ìˆì„ ê²½ìš° array í˜•íƒœë¡œ ë³€í™˜í•˜ì—¬ ì „ë‹¬í•˜ê³ , ì—†ëŠ” ê²½ìš° 404 ì—ëŸ¬ë¥¼ ì‘ë‹µí•œë‹¤.

```tsx
app.route("/channels").get((req, res) => {
  if (db.size > 0) {
    // map -> object arrayë¡œ ë³€ê²½
    const channels = [];
    db.forEach((value, key) => {
      channels.push(value);
    });

    res.status(200).json({ isSuccess: true, channels: channels });
  } else {
    res
      .status(404)
      .json({ isSuccess: false, message: "ì±„ë„ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." });
  }
});
```
