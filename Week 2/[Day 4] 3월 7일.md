## ğŸ“Â ë°±ì—”ë“œì˜ êµ¬ì¡°

- **ì›¹ ì„œë²„ (Web Server)**

  ì •ì  í˜ì´ì§€ì— ëŒ€í•´ ëŒ€ì‘í•˜ëŠ” ì—­í• ë¡œ, ë™ì  í˜ì´ì§€ì— ëŒ€í•œ ì²˜ë¦¬ëŠ” ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ê²Œ ì „ë‹¬í•œë‹¤.

  - **ì •ì  í˜ì´ì§€:** í™”ë©´ì˜ ë‚´ìš©/ë°ì´í„° ë“±ì˜ ë³€ë™ì´ ì—†ëŠ” í˜ì´ì§€
  - **ë™ì  í˜ì´ì§€:** ë°ì´í„° ì²˜ë¦¬/ì—°ì‚°ì„ í†µí•´ í™”ë©´ì˜ ë‚´ìš©, ë°ì´í„°ê°€ ë³€í•˜ëŠ” í˜ì´ì§€

- **ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ (Web Application Server)**
  ë™ì  í˜ì´ì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì—­í• ë¡œ, í•„ìš”í•œ ë°ì´í„° ì—°ì‚°ì„ ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ê²°ë˜ì–´ ìˆìœ¼ë©° ë°ì´í„° ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ìš”ì²­í•œë‹¤.

<br />

## ğŸ“Â Node.jsì˜ ì´í•´

Node.jsëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ ì´ìƒì˜ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ì—­í• ì„ í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ëŸ°íƒ€ì„ í™˜ê²½ì´ë‹¤.

â†’ Node.jsë¥¼ ì´ìš©í•˜ì—¬ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë°±ì—”ë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŒ!

### âœ”ï¸Â Node.jë¡œ ì›¹ ì„œë²„ ë§Œë“¤ê¸°

```jsx
let http = require("http");

function onRequest(req, res) {
  res.writeHead(200, { "Content-Type": "text/html" });
  res.write("Hello Node.js");
  res.end();
}

http.createServer(onRequest).listen(8888);
```

### âœ”ï¸Â server ëª¨ë“ˆí™”

Node.jsê°€ ì œê³µí•˜ëŠ” ëª¨ë“ˆ ì´ì™¸ì— ì§ì ‘ ë§Œë“  ì„œë²„ ì½”ë“œë„ ë‹¤ë¥¸ ì½”ë“œì—ì„œ ëª¨ë“ˆì²˜ëŸ¼ ë¶ˆëŸ¬ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

`index.js` ë¥¼ ë§Œë“¤ê³  server íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•˜ë©´ ë!

```jsx
let server = require("./server");
```

ê·¸ëŸ¬ë‚˜ ì§€ê¸ˆì€ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¤ê¸°ë§Œ í•´ë„ ì„œë²„ê°€ ì‹œì‘ë˜ëŠ” ìƒíƒœì´ê¸° ë•Œë¬¸ì— ì—¬ì „íˆ ìœ ì—°ì„±ì€ ë–¨ì–´ì§„ë‹¤.

ë‹¤ìŒê³¼ ê°™ì´ ì„œë²„ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¨ ë’¤ ì›í•  ë•Œ ì„œë²„ë¥¼ ì‹œì‘í•˜ê²Œ ì½”ë“œë¥¼ ë³€ê²½í•˜ë©´ ëœë‹¤.

```jsx
let http = require("http");

// ì„œë²„ ì‹œì‘ í•¨ìˆ˜
function start() {
  function onRequest(req, res) {
    res.writeHead(200, { "Content-Type": "text/html" });
    res.write("Hello Node.js");
    res.end();
  }

  http.createServer(onRequest).listen(8888);
}

// ì„œë²„ ì‹œì‘ í•¨ìˆ˜ ë‚´ë³´ë‚´ê¸°
exports.start = start;
```

```jsx
let server = require("./server");

server.start(); // ì„œë²„ ì‹œì‘!
```

<br />

## ğŸ“Â URL

â†’ Uniform Resource Locator

ì¸í„°ë„· ìƒì—ì„œ ì›¹ í˜ì´ì§€ì˜ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ëŠ” ì£¼ì†Œì´ë‹¤.

### âœ”ï¸Â url ì½ì–´ì˜¤ê¸°

ìµœëŒ€í•œ ì˜ì¡´ì„±ì„ ë‚®ì¶”ë„ë¡ ê° íŒŒì¼ì„ ë¶„ë¦¬í•˜ì—¬ urlì„ ì½˜ì†”ì— ì¶œë ¥í•˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.

```jsx
function route(pathname) {
  console.log("pathname: ", pathname);
}

exports.route = route;
```

```jsx
let server = require("./server");
let router = require("./router");

server.start(router.route); // route í•¨ìˆ˜ ì „ë‹¬!
```

```jsx
let http = require("http");
let url = require("url");

// ì„œë²„ ì‹œì‘ í•¨ìˆ˜
function start(route) {
  function onRequest(req, res) {
    // url ì½ì–´ì˜¤ê¸°
    let pathname = url.parse(req.url).pathname;
    route(pathname);

    // ì„œë²„ ì‘ë‹µ ìƒì„±
    res.writeHead(200, { "Content-Type": "text/html" });
    res.write("Hello Node.js");
    res.end();
  }

  http.createServer(onRequest).listen(8888);
}

// ì„œë²„ ì‹œì‘ í•¨ìˆ˜ ë‚´ë³´ë‚´ê¸°
exports.start = start;
```

<br />

## ğŸ“Â ì„œë²„ ì½”ë“œ ë¶„ì„í•´ë³´ê¸°

urlì— ë”°ë¼ ë‹¤ë¥¸ responseë¥¼ ë³´ë‚´ë„ë¡ routing ì²˜ë¦¬ë¥¼ í•œ ì„œë²„ ì½”ë“œì´ë‹¤.

### âœ”ï¸Â server.js

ì—¬ê¸°ì„œ `start` í•¨ìˆ˜ëŠ” ì„œë²„ë¥¼ ì‹œì‘í•˜ëŠ” ì—­í• ì„ í•˜ëŠ”ë°,

ìš”ì²­ì´ ì˜¤ë©´ í•´ë‹¹ ìš”ì²­ì˜ URLì„ parsingí•˜ê³ , í•´ë‹¹ URLì„ ê¸°ë°˜ìœ¼ë¡œ ë¼ìš°íŒ… í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.

```jsx
const http = require("http");
const url = require("url");

function start(route, handle) {
  http
    .createServer((req, res) => {
      const pathname = url.parse(req.url).pathname;
      route(pathname, handle, res);
    })
    .listen(8888, () => console.log("server listening on port:8888..."));
}

exports.start = start;
```

- **http ëª¨ë“ˆ:** http ì›¹ ì„œë²„ì™€ ê´€ë ¨ëœ ëª¨ë“  ê¸°ëŠ¥ì„ ë‹´ì€ ëª¨ë“ˆ. (ì›¹ì„œë²„ ìƒì„±, í´ë¼ì´ì–¸íŠ¸ ìƒì„± ë“±)
- **url ëª¨ë“ˆ:** url ì •ë³´ë¥¼ ê°ì²´ë¡œ ê°€ì ¸ì™€ì„œ ë¶„ì„í•˜ê³  ì²˜ë¦¬í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ëª¨ë“ˆ.
- **listen**: ì„œë²„ë¥¼ ì‹¤í–‰í•˜ëŠ” ë©”ì†Œë“œ. ì„œë²„ê°€ ì‹¤í–‰ë  í¬íŠ¸ë²ˆí˜¸ì™€ ì½œë°± í•¨ìˆ˜ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

- **url.parse()**

  ìš”ì²­ urlì„ ì „ë‹¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ url ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜í•œë‹¤.

    <img width="437" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-07 á„‹á…©á„’á…® 7 21 24" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/ce85f9a0-eb87-424d-bf73-897ba7c21333">
    
    â€˜url.parse(req.url)â€™ë¥¼ ì¶œë ¥í•œ ê²°ê³¼
    
    - **parseì˜ ëœ»?**
        
        ì‚¬ì „ì  ì •ì˜ëŠ” â€˜ë¬¸ë²•ì ìœ¼ë¡œ ë¶„ì„í•˜ë‹¤â€™ë¼ëŠ” ëœ»ìœ¼ë¡œ, ê°œë°œ ìš©ì–´ë¡œ ì‚¬ìš©ë  ë• **ë¶„í•´, ë¶„ì„í•˜ì—¬ ëª©ì ì— ë§ê²Œ ê°€ê³µí•˜ê³  ì¶”ì¶œí•˜ëŠ” ê²ƒ**ì„ ë§í•œë‹¤. ê·¸ë¦¬ê³  ì´ëŸ¬í•œ parsingì„ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ parserë¼ ë¶€ë¥¸ë‹¤.
        
        ëŒ€í‘œì ìœ¼ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” string í˜•íƒœë¡œ ì‘ì„±ëœ ê°ì²´ë¥¼ JSON í˜•íƒœë¡œ parsingí•˜ì—¬ ì‚¬ìš©í•˜ê³¤ í•œë‹¤.
        
        ```jsx
        const rawData = "{ name : í™ê¸¸ë™, age : 21 }";   // string í˜•íƒœì˜ ê°ì²´
        const jsonData = JSON.parse(rawdata);          // JSON í˜•íƒœë¡œ parsing!
        ```

- **exports vs module.export**

  ```jsx
  const module = { exports: {} };
  const exports = module.exports;
  ```

  exportsì™€ module.exportsëŠ” ë™ì¼í•œ ê°ì²´ë¼ê³  ë³¼ ìˆ˜ ìˆìœ¼ë‚˜, **exportsëŠ” module.exportsë¥¼ ì°¸ì¡°(call by reference)**í•˜ê³  ìˆëŠ” í˜•íƒœì´ë‹¤.
  ë”°ë¼ì„œ exportsì— ë°ì´í„°ë¥¼ ë°”ë¡œ ëŒ€ì…í•˜ë©´ module.exportsì— ëŒ€í•œ ì°¸ì¡°ê°€ ëŠì–´ì§€ê³  í•´ë‹¹ ë°ì´í„°ì˜ ê°’ì„ ê°€ì§€ê²Œ ëœë‹¤.

  ```jsx
  const obj = {
    key1: "v1",
    key2: "v2",
  };

  module.exports = obj; // ê°€ëŠ¥
  module.exports.obj = obj; // ê°€ëŠ¥

  exports = obj; // ë¶ˆê°€ëŠ¥ -> module.exportsì— ëŒ€í•œ ì°¸ì¡°ê°€ ëŠê¹€
  exports.obj = obj; // ê°€ëŠ¥
  ```

  â†’ `exports` ëŠ” `module.exports` ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆìŒ!

### âœ”ï¸Â router.js

ìš”ì²­ ê²½ë¡œì™€ ìš”ì²­ í•¸ë“¤ëŸ¬ë¥¼ ë°›ì•„ì™€ì„œ, í•´ë‹¹ ê²½ë¡œì— ë”°ë¼ ì ì ˆí•œ ì‘ë‹µì„ ì²˜ë¦¬í•œë‹¤.

ë§Œì•½ í•´ë‹¹ ê²½ë¡œê°€ ì •ì˜ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ 404 í˜ì´ì§€ë¥¼ í˜¸ì¶œí•¨!

```jsx
function route(pathname, handle, res) {
  if (typeof handle[pathname] === "function") {
    handle[pathname](res);
  } else {
    handle["/404"](res);
  }
}

exports.route = route;
```

### âœ”ï¸Â requestHandler.js

ê° ê²½ë¡œì— ë§ëŠ” ì‘ë‹µ ê°’ì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ë“¤ì´ ì •ì˜ë˜ì–´ ìˆë‹¤.

```jsx
function main(res) {
  res.writeHead(200, { "Content-Type": "text/html" });
  res.write("Main Page");
  res.end();
}

function login(res) {
  res.writeHead(200, { "Content-Type": "text/html" });
  res.write("Login Page");
  res.end();
}

function notFound(res) {
  res.writeHead(404, { "Content-Type": "text/html" });
  res.write("404 Not Found");
  res.end();
}

let handle = {
  "/": main,
  "/login": login,
  "/404": notFound,
};

exports.handle = handle;
```

- **writeHead():** ì‘ë‹µ í—¤ë”ì— ë“¤ì–´ê°ˆ ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” ë©”ì†Œë“œ. HTTP ìƒíƒœì½”ë“œì™€ ì‘ë‹µ í˜•ì‹ì„ ì „ë‹¬í•œë‹¤.
- **write():** ë³¸ë¬¸(body)ì— ë³´ì—¬ì§ˆ ë‚´ìš©ì„ ì „ë‹¬í•˜ëŠ” ë©”ì†Œë“œ.
- **end():** ì‘ë‹µì„ ì¢…ë£Œí•˜ëŠ” ë©”ì†Œë“œ.

### âœ”ï¸Â index.js

ê° ëª¨ë“ˆë“¤ì„ ê°€ì ¸ì™€ì„œ ì„œë²„ë¥¼ ì‹œì‘í•˜ëŠ” ì½”ë“œ.

```jsx
let server = require("./server");
let router = require("./router");
let requestHandler = require("./requestHandler");

server.start(router.route, requestHandler.handle);
```

ì´ ì½”ë“œë¥¼ í†µí•´ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ì„œë²„ê°€ ì´ë¥¼ ë°›ì•„ì„œ ì ì ˆí•œ í˜ì´ì§€ë¡œ ë¼ìš°íŒ…í•˜ê³ ,

í•´ë‹¹ í˜ì´ì§€ì— ëŒ€í•œ ì‘ë‹µì„ ìƒì„±í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ë‚´ì£¼ëŠ” ê¸°ë³¸ì ì¸ ì›¹ ì„œë²„ê°€ ë§Œë“¤ì–´ì§€ëŠ” êµ¬ì¡°!

<br />
