## ğŸ“Â app.use()

expressì—ëŠ” http ëª¨ë“ˆ ì™¸ì—ë„ ë‹¤ë¥¸ ëª¨ë“ˆë“¤ì„ ë¯¸ë“¤ì›¨ì–´ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

`use()` ë¥¼ í™œìš©í•˜ë©´ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì—°ê²°í•  ìˆ˜ ìˆìŒ!

```jsx
app.use(express.json());

app.post("/test", (req, res) => {
  console.log(req.body);
});
```

<br />

## ğŸ“Â youtuber ì‹¤ìŠµ

â†’ POSTë¡œ ìƒˆë¡œìš´ youtuber ë“±ë¡í•´ë³´ê¸°!

### âœ”ï¸Â API ì„¤ê³„

- `GET /youtuber/:id` : idë¡œ mapì—ì„œ youtuber ê°ì²´ë¥¼ ì°¾ì•„ì„œ, í•´ë‹¹ ê°ì²´ì˜ ì •ë³´ë¥¼ ë¿Œë ¤ì¤Œ.
  - **req**: params.id â† mapì— ì €ì¥ëœ key ê°’ ì „ë‹¬.
  - **res**: idë¥¼ ì´ìš©í•˜ì—¬ mapì—ì„œ ê°ì²´ ì¡°íšŒ í›„ ì „ë‹¬.
- `POST /youtuber` : ìƒˆë¡œìš´ ìœ íŠœë²„ ë“±ë¡.
  - **req**: ìƒˆë¡œìš´ ìœ íŠœë²„ ì •ë³´ë¥¼ bodyì— ë‹´ì•„ì„œ ì „ë‹¬. (channel, sub, video)
  - **res**: â€œchannelë‹˜, ìœ íŠœë²„ ìƒí™œì„ ì‘ì›í•©ë‹ˆë‹¤!â€

### âœ”ï¸Â GET API êµ¬í˜„

youtuberì˜ id ê°’ì„ ì „ë‹¬ë°›ì•„ dbì—ì„œ ì¡°íšŒí•œ í›„ ì¡°íšŒëœ ê°’ì„ ì‘ë‹µìœ¼ë¡œ ëŒë ¤ì¤€ë‹¤.

```jsx
app.get("/youtuber/:id", (req, res) => {
  let { id } = req.params;
  id = parseInt(id);
  const youtuber = db.get(id);

  // ìœ íŠœë²„ê°€ ì—†ë‹¤ë©´?
  if (youtuber === undefined) {
    res.json({
      message: "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìœ íŠœë²„ì…ë‹ˆë‹¤.",
    });
  }
  // ìœ íŠœë²„ê°€ ìˆë‹¤ë©´?
  else {
    res.json(youtuber);
  }
});
```

### âœ”ï¸Â POST API êµ¬í˜„

body ê°’ì„ êµ¬ì¡° ë¶„í•´ í• ë‹¹í•œ í›„ dbì— ë“±ë¡í•´ì£¼ê³ , ì‘ë‹µ ê°’ì„ ì „ë‹¬í•œë‹¤.

dbì— ë“±ë¡í•  ë•Œ í•´ë‹¹ youtuberì˜ id ê°’ì€ dbì— ì¡´ì¬í•˜ëŠ” youtuber ìˆ˜ì— ë”°ë¼ ì°¨ë¡€ëŒ€ë¡œ í• ë‹¹ë˜ê²Œë” í–ˆë‹¤.

```jsx
app.post("/youtuber", (req, res) => {
  const { channel, sub, video } = req.body; // ìš”ì²­ body ê°’ êº¼ë‚´ê¸°
  const newId = db.size + 1; // id êµ¬í•˜ê¸°

  // dbì— ë“±ë¡!
  db.set(newId, { channel, sub, video });

  // ì‘ë‹µ ì „ì†¡
  res.json({
    message: `${db.get(newId).channel}ë‹˜, ìœ íŠœë²„ ìƒí™œì„ ì‘ì›í•©ë‹ˆë‹¤!`,
  });
});
```

Postman í…ŒìŠ¤íŠ¸ ê²°ê³¼ë„ ë‹¤ìŒê³¼ ê°™ì´ ì˜ ì‘ë™ë˜ëŠ” ê²ƒìœ¼ë¡œ í™•ì¸ ì™„!

<img width="686" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-20 á„‹á…©á„Œá…¥á†« 11 47 07" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/2a22da68-58f0-4cff-9e0c-0a8efc0fc0d9">

<br />

## ğŸ“Â youtuber ì „ì²´ ì¡°íšŒ

dbì— ìˆëŠ” ëª¨ë“  youtuberë“¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ì „ì²´ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•  ê²ƒì´ë‹¤.

### âœ”ï¸Â API ì„¤ê³„

- `GET  /youtubers` : ì „ì²´ youtuber ì •ë³´ë¥¼ ì „ì²´ ì¡°íšŒí•œë‹¤.
  - **req**: ì „ë‹¬ ê°’ ì—†ìŒ!
  - **res**: ì „ì²´ youtuberì˜ ì •ë³´ ì „ë‹¬

### âœ”ï¸Â GET API êµ¬í˜„

í˜„ì¬ëŠ” â€˜dbâ€™ë¼ê³  ì •ì˜í•´ë†“ì€ map ê°ì²´ë¥¼ DB ëŒ€ì‹  ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, mapì„ ê¸°ì¡´ì˜ javascript ê°ì²´ë¡œ ë°”ê¿”ì„œ ì „ë‹¬í•´ì¤¬ë‹¤.

```jsx
app.get("/youtubers", (req, res) => {
  // map -> objectë¡œ ë³€ê²½
  const obj = {};
  db.forEach((value, key) => {
    obj[key] = value;
  });

  // ì „ì²´ ë°ì´í„° ì „ì†¡
  res.json(obj);
});
```

Postman í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì˜ ë‚˜ì˜¤ëŠ” ê²ƒê¹Œì§€ í™•ì¸!

â†’ ìƒˆë¡œ ì¶”ê°€í•œ youtuber ë°ì´í„°ë„ ì•Œë§ê²Œ ì¶”ê°€ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

<img width="682" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-03-20 á„‹á…©á„’á…® 12 22 28" src="https://github.com/JIMIN1020/dev-study-note/assets/121474189/08ed277b-d071-4c39-a90d-69070f6ce627">
