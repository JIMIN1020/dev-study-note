## ğŸ“Â liked ì—¬ë¶€

ë¡œê·¸ì¸ ìƒíƒœì´ë©´, ì¦‰ í—¤ë”ì— authorization ê°’ì´ ë“¤ì–´ì˜¤ë©´ ì¢‹ì•„ìš” ì—¬ë¶€ë¥¼ í¬í•¨í•˜ê³ , ë¡œê·¸ì¸ ìƒíƒœê°€ ì•„ë‹ˆë©´ ì¢‹ì•„ìš” ì—¬ë¶€ë¥¼ ë¯¸í¬í•¨í•œë‹¤.

```jsx
const getBookDetail = async (req, res) => {
  const bookId = +req.params.id;
  try {
    // ë¡œê·¸ì¸ ìƒíƒœì´ë©´ -> ì¢‹ì•„ìš” ì—¬ë¶€ í¬í•¨
    if (req.headers["authorization"]) {
      const token = verifyToken(req);
      const values = [token.id, bookId];
      const result = await bookService.getBookDetail(
        bookQuery.getBookDetail,
        values
      );
      res.status(StatusCodes.OK).json(result);
    }
    // ë¡œê·¸ì¸ ìƒíƒœê°€ ì•„ë‹ˆë©´ ì¢‹ì•„ìš” ì—¬ë¶€ ë¯¸í¬í•¨
    else {
      const result = await bookService.getBookDetail(
        bookQuery.getBookDetailNotLogin,
        bookId
      );
      res.status(StatusCodes.OK).json(result);
    }
  } catch (err) {
    res.status(err.statusCode || StatusCodes.INTERNAL_SERVER_ERROR).json({
      isSuccess: false,
      message: err.message,
    });
  }
};
```

<br/>

## ğŸ“Â Pagination

ì „ì²´ ë„ì„œ ëª©ë¡ ì¡°íšŒ ì‹œ í˜ì´ì§€ë„¤ì´ì…˜ ì •ë³´ë¥¼ ì¶”ê°€í•˜ì—¬ í•¨ê»˜ ë³´ë‚¸ë‹¤.

```jsx
{
	isSuccess: true,
	result: [
	  pagination: {
		  current_page: "í˜„ì¬ í˜ì´ì§€ ìˆ˜",
		  total_count: "ì „ì²´ ë„ì„œ ê°œìˆ˜",
	  }
	  books: [
		  {
	      id: "ë„ì„œ Id",
	      img: "ë„ì„œ ì´ë¯¸ì§€",
	      title: "ì œëª©",
	      author: "ì‘ê°€",
		    summary: "ìš”ì•½",
	      price: "ê°€ê²©",
	      likes: "ì¢‹ì•„ìš” ìˆ˜",
	      publish_date: "ì¶œê°„ì¼"
	    },
	   â€¦
		]
}
```

APIëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì „ì²´ ë„ì„œ ê°œìˆ˜ë¥¼ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ë¥¼ ì¶”ê°€í–ˆê³ , ë°ì´í„°ë¥¼ pagination / booksë¡œ ë‚˜ëˆ„ì–´ resultì— ë‹´ì•˜ë‹¤.

```
/* ----- ì „ì²´ ë„ì„œ ì¡°íšŒ ----- */
const getAllBooks = async (sql, values, page) => {
  try {
    // ì „ì²´ ë„ì„œ ê°œìˆ˜ ì¡°íšŒ
    const count = await conn.query(bookQuery.getBookCount);
    const total_count = count[0];

    // ë„ì„œ ëª©ë¡ ì¡°íšŒ
    const result = await conn.query(sql, values);
    const bookData = result[0];

    if (bookData) {
      return {
        isSuccess: true,
        result: {
          pagination: {
            total_count,
            current_page: page,
          },
          books: bookData,
        },
      };
    } else {
      throw new CustomError(
        StatusCodes.BAD_REQUEST,
        "ë°ì´í„°ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
      );
    }
  } catch (err) {
    throw err;
  }
};
```
